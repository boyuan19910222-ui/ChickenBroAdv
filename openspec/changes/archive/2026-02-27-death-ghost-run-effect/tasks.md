## 1. 创建死亡覆盖层组件

- [x] 1.1 创建 DeathGhostOverlay.vue 组件文件
- [x] 1.2 实现全屏覆盖层基础结构和CSS样式
- [x] 1.3 添加CSS grayscale(100%)黑白滤镜效果
- [x] 1.4 设置最高z-index确保覆盖所有其他元素
- [x] 1.5 实现pointer-events:none交互阻塞机制

## 2. 实现跑尸动画逻辑

- [x] 2.1 添加"跑尸中..."文本的居中显示
- [x] 2.2 实现点数动画状态管理（1-5点循环）
- [x] 2.3 创建500ms间隔的点数变化定时器
- [x] 2.4 添加定时器清理逻辑防止内存泄漏
- [x] 2.5 实现5-10秒随机时长生成逻辑

## 3. 集成事件系统

- [x] 3.1 在组件中监听'ghost-run:start'事件显示覆盖层
- [x] 3.2 在组件中监听'ghost-run:end'事件隐藏覆盖层
- [x] 3.3 实现随机计时器结束时发射'ghost-run:end'事件
- [x] 3.4 添加重复调用保护机制清理旧定时器
- [x] 3.5 确保组件销毁时正确清理所有定时器

## 4. 修改战斗系统死亡流程

- [x] 4.1 在CombatSystem.endCombat(false)中识别死亡时机点
- [x] 4.2 插入'ghost-run:start'事件发射，延迟原死亡逻辑
- [x] 4.3 添加'ghost-run:end'事件监听器继续死亡处理
- [x] 4.4 确保战斗状态在跑尸期间保持不变
- [x] 4.5 修改场景切换逻辑延迟到跑尸结束后执行

## 5. 应用级集成

- [x] 5.1 在App.vue中导入DeathGhostOverlay组件
- [x] 5.2 将覆盖层组件添加到App根组件模板中
- [x] 5.3 确保覆盖层组件在正确的DOM位置（最高层级）
- [x] 5.4 验证EventBus事件系统可正确传递跑尸事件

## 6. 测试和验证

- [x] 6.1 测试player死亡时覆盖层正确显示
- [x] 6.2 验证黑白滤镜效果和交互阻塞功能
- [x] 6.3 测试点数动画循环和时间间隔准确性
- [x] 6.4 验证随机时长范围（5-10秒）符合要求
- [x] 6.5 测试跑尸结束后死亡惩罚和复活逻辑正常
- [x] 6.6 验证边缘情况处理（页面刷新、重复死亡等）

## 7. 完善和优化

- [x] 7.1 添加超时保护机制（15秒强制结束）
- [x] 7.2 优化CSS性能确保低端设备流畅运行
- [x] 7.3 验证与现有存档系统兼容性
- [x] 7.4 确认不影响其他游戏系统的正常运行
- [x] 7.5 代码审查和清理冗余注释