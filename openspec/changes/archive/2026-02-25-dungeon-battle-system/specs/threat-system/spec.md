## 新增需求

### 需求: 仇恨值累计
系统应追踪每个敌人对每个玩家单位的仇恨值。

#### 场景: 伤害产生仇恨
- **给定** 玩家A对敌人X造成100点伤害
- **当** 计算仇恨时
- **那么** 敌人X对玩家A的仇恨值增加100（系数1.0）

#### 场景: 治疗产生仇恨
- **给定** 玩家B对队友治疗200点生命
- **当** 计算仇恨时
- **那么** 所有敌人对玩家B的仇恨值增加100（系数0.5）

#### 场景: 坦克技能额外仇恨
- **给定** 坦克使用破甲攻击造成50点伤害
- **当** 计算仇恨时
- **那么** 仇恨值增加150（50 × 3.0坦克系数）

### 需求: 仇恨目标选择
系统应根据仇恨值决定敌人的攻击目标。

#### 场景: 攻击最高仇恨目标
- **给定** 敌人X的仇恨列表：玩家A(500)、玩家B(300)、玩家C(200)
- **当** 敌人X选择攻击目标时
- **那么** 默认攻击玩家A（最高仇恨）

#### 场景: 仇恨目标阵亡
- **给定** 最高仇恨目标玩家A阵亡
- **当** 敌人选择攻击目标时
- **那么** 攻击第二高仇恨的玩家B

### 需求: 嘲讽机制
系统应实现嘲讽技能，强制锁定敌人攻击目标。

#### 场景: 嘲讽效果
- **给定** 坦克对敌人X使用嘲讽
- **当** 嘲讽生效时
- **那么** 敌人X被强制锁定攻击坦克
- **并且** 锁定持续2回合

#### 场景: 嘲讽覆盖
- **给定** 敌人X已被玩家A嘲讽（剩余1回合）
- **当** 玩家B对敌人X使用嘲讽时
- **那么** 嘲讽目标更新为玩家B
- **并且** 持续时间重置为2回合

#### 场景: 嘲讽过期
- **给定** 敌人X被嘲讽，剩余0回合
- **当** 新回合开始时
- **那么** 嘲讽效果移除
- **并且** 敌人恢复按仇恨选择目标

### 需求: 仇恨显示
系统应为坦克玩家显示仇恨信息。

#### 场景: 坦克可见仇恨
- **给定** 玩家角色是坦克职业
- **当** 战斗进行中时
- **那么** 显示当前仇恨最高的目标指示
- **并且** 显示自己的仇恨排名

---

## 数据结构

### 仇恨系数配置
```javascript
const THREAT_CONFIG = {
  damage_multiplier: 1.0,       // 伤害仇恨系数
  healing_multiplier: 0.5,      // 治疗仇恨系数
  tank_skill_multiplier: 3.0,   // 坦克技能额外系数
  taunt_duration: 2,            // 嘲讽持续回合数
};
```

### 仇恨数据结构
```javascript
const threatTable = {
  // 每个敌人有自己的仇恨表
  'enemy_serpentis': {
    'player_warrior': 1500,   // 坦克
    'player_mage': 800,       // DPS
    'player_priest': 400,     // 治疗
  },
  'enemy_bat_1': {
    'player_warrior': 200,
    'player_mage': 150,
  }
};
```

### 嘲讽状态
```javascript
const tauntState = {
  // 敌人ID -> 嘲讽信息
  'enemy_serpentis': {
    tauntedBy: 'player_warrior',
    remainingRounds: 2,
  }
};
```

### 仇恨变化事件
```javascript
const threatChangeEvent = {
  type: 'threat_change',
  source: 'player_mage',
  target: 'enemy_serpentis',
  amount: 150,
  reason: 'damage',           // 'damage' | 'healing' | 'skill' | 'taunt'
  newTotal: 950,
};
```
