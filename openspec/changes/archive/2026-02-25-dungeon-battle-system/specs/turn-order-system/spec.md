## 新增需求

### 需求: 职业固定速度
系统应为每个职业定义固定的速度值，不可通过装备改变。

#### 场景: 职业速度定义
- **给定** 9个可玩职业
- **当** 初始化速度系统时
- **那么** 每个职业有固定速度值：
  - 盗贼: 95（最快）
  - 猎人: 85
  - 德鲁伊: 75
  - 法师: 70
  - 萨满: 65
  - 术士: 60
  - 牧师: 55
  - 圣骑士: 45
  - 战士: 40（最慢）

### 需求: 敌人速度配置
系统应为不同类型的敌人定义速度值。

#### 场景: 敌人速度定义
- **给定** 各种敌人类型
- **当** 初始化敌人速度时
- **那么** 按类型分配速度：
  - 蝙蝠: 90（极快）
  - 毒蛇: 80
  - 蜘蛛: 75
  - 狂热者: 55
  - 骷髅: 50
  - 僵尸: 30（慢）
  - BOSS: 各自定义

### 需求: 速度排序行动
系统应按速度值决定基础行动顺序。

#### 场景: 计算行动顺序
- **给定** 战斗中有盗贼(95)、战士(40)、蝙蝠(90)、僵尸(30)
- **当** 计算回合顺序时
- **那么** 基础顺序为：盗贼 → 蝙蝠 → 战士 → 僵尸

### 需求: 惊喜机制
系统应实现随机惊喜机制，偶尔打乱行动顺序。

#### 场景: 惊喜触发
- **给定** 每回合开始时
- **当** 计算是否触发惊喜时
- **那么** 有一定概率（如15%）触发惊喜事件

#### 场景: 惊喜效果 - 随机插入
- **给定** 惊喜事件触发
- **当** 应用惊喜效果时
- **那么** 随机选择一个单位
- **并且** 将其行动顺序随机插入到新位置

#### 场景: 惊喜效果 - 先手反转
- **给定** 惊喜事件触发
- **当** 应用惊喜效果时
- **那么** 可能将最慢的单位移到最前
- **或者** 将最快的单位移到最后

### 需求: 完全交替回合结构
系统应实现敌我单位完全按速度混合排序的回合结构。

#### 场景: 混合排序
- **给定** 我方：盗贼(95)、战士(40)、牧师(55)
- **并且** 敌方：蝙蝠(90)、僵尸(30)
- **当** 计算回合顺序时
- **那么** 顺序为：盗贼(95) → 蝙蝠(90) → 牧师(55) → 战士(40) → 僵尸(30)

#### 场景: 同速度处理
- **给定** 两个单位速度相同
- **当** 计算行动顺序时
- **那么** 我方优先于敌方
- **或者** 随机决定顺序

---

## 数据结构

### 职业速度配置
```javascript
const CLASS_SPEED = {
  rogue: 95,      // 盗贼
  hunter: 85,     // 猎人
  druid: 75,      // 德鲁伊
  mage: 70,       // 法师
  shaman: 65,     // 萨满
  warlock: 60,    // 术士
  priest: 55,     // 牧师
  paladin: 45,    // 圣骑士
  warrior: 40,    // 战士
};
```

### 敌人速度配置
```javascript
const ENEMY_SPEED = {
  // 小怪
  bat: 90,
  snake: 80,
  spider: 75,
  cultist: 55,
  skeleton: 50,
  zombie: 30,
  golem: 20,
  
  // BOSS
  serpentis: 60,
  mutanus: 45,
};
```

### 惊喜机制配置
```javascript
const SURPRISE_CONFIG = {
  trigger_chance: 0.15,   // 15%触发概率
  effects: [
    { type: 'random_insert', weight: 50 },
    { type: 'slowest_first', weight: 25 },
    { type: 'fastest_last', weight: 25 },
  ],
};
```

### 回合顺序状态
```javascript
const turnOrderState = {
  currentRound: 1,
  turnOrder: [
    { unitId: 'player_rogue', speed: 95, side: 'player' },
    { unitId: 'enemy_bat_1', speed: 90, side: 'enemy' },
    // ...
  ],
  currentTurnIndex: 0,
  surpriseTriggered: false,
  surpriseEffect: null,
};
```
